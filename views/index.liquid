{% render 'partials/head.liquid', title: 'Squad page' %}

<header class="page-header">
  <h2>Classified</h2>
  <p>Case File Archive</p>

  <!-- Navigatie voor filters -->
  <nav class="filters">
    <a href="/" class="filter-link{% if activeFilter == '/' %} active{% endif %}">All squads</a>
    <a href="/squad-1i" class="filter-link{% if activeFilter == '/squad-1i' %} active{% endif %}">Squad 1I</a>
    <a href="/squad-1j" class="filter-link{% if activeFilter == '/squad-1j' %} active{% endif %}">Squad 1J</a>
    <a href="/az" class="filter-link{% if activeFilter == '/az' %} active{% endif %}">A–Z</a>
    <a href="/za" class="filter-link{% if activeFilter == '/za' %} active{% endif %}">Z–A</a>
  </nav>
</header>

<main>
  <!-- Section voor het overzicht van alle personen -->
  <section class="board">
    <h3>Case Board</h3>

    {% comment %} Loopt over elk persoon {% endcomment %}
    {% for person in persons %}

      {% assign redacted = "████████" %}

      {% comment %} Link kiezen: profilecard > website > github repo {% endcomment %}
      {% if person.profilecard %}
        <a class="dossier card-link" href="{{ person.profilecard }}">
      {% elsif person.website %}
        <a class="dossier card-link" href="{{ person.website }}">
      {% else %}
        <a class="dossier card-link" href="https://github.com/{{ person.github_handle }}/connect-your-tribe-squad-page">
      {% endif %}

        <article class="card">

          {% comment %} Titel van de kaart {% endcomment %}
          <h4>
            {% if person.name %}
              {{ person.name }}
            {% else %}
              Case file {{ person.id }}
            {% endif %}
          </h4>

          {% comment %} Foto weergeven {% endcomment %}
          <figure class="photo">
            {% if person.mugshot %}
              <img src="https://fdnd.directus.app/assets/{{ person.mugshot }}?" alt="Portrait of {{ person.name }}">
            {% else %}
              <img src="unknown.png" alt="Unknown person">
              <span class="redacted-bar"></span>
            {% endif %}
          </figure>

          <!-- Metadata van de persoon -->
          <section class="meta">
            <h4>Case Details</h4>

            {% comment %} Case label met ID {% endcomment %}
            <p class="label">CASE FILE {{ person.id }}-4A-OC-56120</p>

            {% comment %} Naam tonen {% endcomment %}
            <h3 class="name">
              {% if person.name %}
                {{ person.name }}
              {% else %}
                <span class="redacted">{{ redacted }}</span>
              {% endif %}
            </h3>

            {% comment %} Eigenschappen van de persoon {% endcomment %}
            <ul class="chips">
              <li>
                Nickname:
                {% if person.nickname %}
                  {{ person.nickname | escape }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>

              <li>
                Favorite Movie:
                {% if person.fav_movie %}
                  {{ person.fav_movie }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>

              <li>
                Date of Birth:
                {% if person.birthdate %}
                  {{ person.birthdate | date: '%d-%m-%Y' }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>

              <li>
                Last Known Location:
                {% if person.residency %}
                  {{ person.residency }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>

              <li>
                Hobby:
                {% if person.fav_hobby %}
                  {{ person.fav_hobby }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>
            </ul>

            <p class="dob-row">
              <strong class="stamp">CONFIDENTIAL</strong>
            </p>
          </section>
        </article>

      </a>

    {% endfor %}
  </section>
</main>

{% render 'partials/foot.liquid', squads: squads %}
