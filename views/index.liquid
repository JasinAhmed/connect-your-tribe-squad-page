{% render 'partials/head.liquid', title: 'Squad page' %}

<header class="page-header">
  <h2>Classified</h2>
  <p>Case File Archive</p>

  <nav class="filters">
    <a href="/" class="filter-link">Alle squads</a>
    <a href="/squad-1i" class="filter-link">Squad 1I</a>
    <a href="/squad-1j" class="filter-link">Squad 1J</a>
    <a href="/az" class="filter-link">A–Z</a>
    <a href="/za" class="filter-link">Z–A</a>
  </nav>
</header>

<main>
  <section class="board">

    {% comment %} Loopt over elk persoon {% endcomment %}
    {% for person in persons %}

      {% assign redacted = "████████" %}

      {% comment %} Link kiezen: profilecard > website > github repo {% endcomment %}
      {% if person.profilecard %}
        <a class="dossier card-link" href="{{ person.profilecard }}">
      {% elsif person.website %}
        <a class="dossier card-link" href="{{ person.website }}">
      {% else %}
        <a class="dossier card-link" href="https://github.com/{{ person.github_handle }}/connect-your-tribe-squad-page">
      {% endif %}

        <article class="card">

          {% comment %} Kaart titel (voor structuur) {% endcomment %}
          <h4>
            {% if person.name %}
              {{ person.name }}
            {% else %}
              Case file {{ person.id }}
            {% endif %}
          </h4>

          <figure class="photo">
            {% comment %} Foto kiezen: mugshot > fallback {% endcomment %}
            {% if person.mugshot %}
              <img src="https://fdnd.directus.app/assets/{{ person.mugshot }}?" alt="">
            {% else %}
              <img src="unknown.png" alt="">
              <span class="redacted-bar"></span>
            {% endif %}
          </figure>

          <section class="meta">
            <h4>Dossier details</h4>

            {% comment %} Case label met ID {% endcomment %}
            <p class="label">CASE FILE {{ person.id }}-4A-OC-56120</p>

            {% comment %} Naam tonen {% endcomment %}
            <h3 class="name">
              {% if person.name %}
                {{ person.name }}
              {% else %}
                <span class="redacted">{{ redacted }}</span>
              {% endif %}
            </h3>

            {% comment %} Chips met jouw velden {% endcomment %}
            <ul class="chips">
              <li>
                Bijnaam:
                {% if person.nickname %}
                  {{ person.nickname | escape }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>

              <li>
                Movie:
                {% if person.fav_movie %}
                  {{ person.fav_movie }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>

              <li>
                DOB:
                {% if person.birthdate %}
                  {{ person.birthdate | date: '%d-%m-%Y' }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>

              <li>
                Last Known Location:
                {% if person.residency %}
                  {{ person.residency }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>

              <li>
                Hobby:
                {% if person.fav_hobby %}
                  {{ person.fav_hobby }}
                {% else %}
                  <span class="redacted">{{ redacted }}</span>
                {% endif %}
              </li>
            </ul>

            <p class="dob-row">
              <strong class="stamp">CONFIDENTIAL</strong>
            </p>
          </section>
        </article>

      </a>

    {% endfor %}
  </section>
</main>

{% render 'partials/foot.liquid', squads: squads %}
